{% extends 'base.html' %}
{% load static %}
    
    <title>Board-create</title>
    {% block extra-style %}
    <script src="https://kit.fontawesome.com/a47086679e.js" crossorigin="anonymous"></script>
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  
    <!-- Plugin -->
    <link rel="stylesheet" href="https://rawgit.com/enyo/dropzone/master/dist/dropzone.css" />
    <script src="https://rawgit.com/enyo/dropzone/master/dist/dropzone.js"></script>

    <style>
        body {
        background: #EEE;
        font-family: 'Roboto', sans-serif;
        }
        .container {
            background: #fff;
        }
        .create-header {
            padding: 20px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
        }
        .create-header h1 {
            margin: 0; /* margin ì œê±° */
            display: flex; /* Flexbox ì»¨í…Œì´ë„ˆë¡œ ì„¤ì • */
            align-items: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
        }

        .dropzone {
            margin: 0 20px;
            width: 98%;
            margin: 1%;
            border: 2px dashed #3498db !important;
            border-radius: 5px;
            -webkit-transition: .2s;
            transition: .2s;
        }

        .dropzone.dz-drag-hover {
            border: 2px solid #3498db !important;
        }

        .dz-message.needsclick img {
        width: 50px;
        display: block;
        margin: auto;
        opacity: .6;
        margin-bottom: 15px;
        }

        span.plus {
        display: none;
        }

        .dropzone.dz-started .dz-message {
            display: inline-block !important;
            width: 120px;
            float: right;
            border: 1px solid rgba(238, 238, 238, 0.36);
            border-radius: 30px;
            height: 120px;
            margin: 16px;
            -webkit-transition: .2s;
            transition: .2s;
        }

        .dropzone.dz-started .dz-message span.text {
        display: none;
        }

        .dropzone.dz-started .dz-message span.plus {
        display: block;
        font-size: 70px;
        color: #AAA;
        line-height: 110px;
        }        

        /* ë¯¸ë¦¬ë³´ê¸° */
        .preview-container {
            padding: 20px 20px;

            
        }
        .preview-image-container {
            display: flex; 
            justify-content: center; 
            align-items: center; 
            flex-direction: column; 

        }

        

        .preview-image {
            display: none;
            max-width: 70%; /* ìˆ˜ì •ëœ ë¶€ë¶„ */
            height: auto;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .dz-remove {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 25px;
            height: 25px;
            background: #373634;
            color: white;
            border-radius: 50%;
            line-height: 25px;
            text-align: center;
            cursor: pointer;
            z-index: 1000;
            opacity: 0.8;
        }

        .dz-remove:hover {
            background-color: rgb(90, 129, 151);
        }

        .dz-remove:before, .dz-remove:after {
            content: ' ';
            position: absolute;
            width: 2px;
            height: 20px;
            background-color: #fff;
        }

        .dz-remove:before {
            transform: rotate(45deg);
            left: 11px;
            top: 2px;
        }

        .dz-remove:after {
            transform: rotate(-45deg);
            left: 11px;
            top: 2px;
        }
    </style>
    {% endblock %}

    {% block content %}
    <div class="container mt-5">
        <div class="create-header">
            <h1>ìƒˆ í¬ìŠ¤íŠ¸ ìƒì„±</h1>
            <form action="{% url 'board:board_create_form' %}" method="post">
                {% csrf_token%}
                <button type="submit" class="btn btn-outline-secondary">ë‹¤ìŒ</button>
            </form>
        </div>
        

        <div id="dropzone">
            <form action="https://httpbin.org/post" id="demo-upload" class="dropzone needsclick" >
                <div class="dz-message needsclick">
                    <span class="text">
                    <img src="http://www.freeiconspng.com/uploads/------------------------------iconpngm--22.png" alt="Camera" />
                    ğŸ‘‰  ì—¬ê¸°ì— íŒŒì¼ì„ ëŒì–´ë‹¤ ë†“ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œí•˜ì„¸ìš”. ğŸ‘ˆ
                    </span>
                    <span class="plus">+</span>
                </div>
            </form>
        </div>

        <div class="preview-container">
            <h1>ë¯¸ë¦¬ë³´ê¸°</h1>
            <p>â•ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ë¥¼ í´ë¦­í•˜ì„¸ìš”.</p>
            <div id="preview-container" class="preview-image-container mt-3">
                <img id="preview-image" class="preview-image" src="" alt="Preview">
                
            </div>
        </div>
    </div>

<script>
        Dropzone.options.demoUpload = {
            init: function() {
                var _this = this;

                 // Dropzone ì»¨í…Œì´ë„ˆì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                this.element.addEventListener("click", function(e) {
                    if (e.target.classList.contains('dz-remove')) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        var fileElement = e.target.closest('.dz-preview');
                        if (fileElement) {
                            var file = fileElement.file;
                            if (file) {
                                console.log("Removing file:", file.name);
                                _this.removeFile(file);
                            } else {
                                console.error("File not found");
                            }
                        } else {
                            console.error("File element not found");
                        }
                    }
                });

                this.on("addedfile", function(file) { // "thumbnail" ì´ë²¤íŠ¸ì—ì„œ "addedfile" ì´ë²¤íŠ¸ë¡œ ë³€ê²½
                    console.log("File added:", file.name);
                    var removeButton = Dropzone.createElement("<button class='dz-remove'></button>");
                    removeButton.setAttribute('data-dz-remove', '');
                    file.previewElement.appendChild(removeButton);

                    // íŒŒì¼ ê°ì²´ë¥¼ previewElementì— ì§ì ‘ ì—°ê²°
                    file.previewElement.file = file;
                    
                    var reader = new FileReader();
                    reader.onload = function(event) {
                        file.previewElement.addEventListener("click", function(e) {
                            // ì´ë²¤íŠ¸ ë²„ë¸”ë§ ë°©ì§€
                            if (e.target.classList.contains('dz-remove')) return;

                            var previewImage = document.getElementById('preview-image');
                            previewImage.src = event.target.result;
                            previewImage.style.display = 'block';
                        });
                    };
                    reader.readAsDataURL(file);
            });
          
            }
        };
           
</script>
{% endblock %}